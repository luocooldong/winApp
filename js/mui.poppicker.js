!function(s,i){s.dom=function(e){return"string"!=typeof e?e instanceof Array||e[0]&&e.length?[].slice.call(e):[e]:(s.__create_dom_div__||(s.__create_dom_div__=i.createElement("div")),s.__create_dom_div__.innerHTML=e,[].slice.call(s.__create_dom_div__.childNodes))};s.PopPicker=s.Class.extend({init:function(e){var t=this;t.options=e||{},t.options.buttons=t.options.buttons||["取消","确定"],t.panel=s.dom('<div class="mui-poppicker">\t\t<div class="mui-poppicker-header">\t\t\t<button class="mui-btn mui-poppicker-btn-cancel">取消</button>\t\t\t<button class="mui-btn mui-btn-blue mui-poppicker-btn-ok">确定</button>\t\t\t<div class="mui-poppicker-clear"></div>\t\t</div>\t\t<div class="mui-poppicker-body">\t\t</div>\t</div>')[0],i.body.appendChild(t.panel),t.ok=t.panel.querySelector(".mui-poppicker-btn-ok"),t.cancel=t.panel.querySelector(".mui-poppicker-btn-cancel"),t.body=t.panel.querySelector(".mui-poppicker-body"),t.mask=s.createMask(),t.cancel.innerText=t.options.buttons[0],t.ok.innerText=t.options.buttons[1],t.cancel.addEventListener("tap",function(e){t.hide()},!1),t.ok.addEventListener("tap",function(e){t.callback&&(!1!==t.callback(t.getSelectedItems())&&t.hide())},!1),t.mask[0].addEventListener("tap",function(){t.hide()},!1),t._createPicker(),t.panel.addEventListener(s.EVENT_START,function(e){e.preventDefault()},!1),t.panel.addEventListener(s.EVENT_MOVE,function(e){e.preventDefault()},!1)},_createPicker:function(){var e=this,t=e.options.layer||1,i=100/t+"%";e.pickers=[];for(var c=1;c<=t;c++){var n=s.dom('<div class="mui-picker">\t\t<div class="mui-picker-inner">\t\t\t<div class="mui-pciker-rule mui-pciker-rule-ft"></div>\t\t\t<ul class="mui-pciker-list">\t\t\t</ul>\t\t\t<div class="mui-pciker-rule mui-pciker-rule-bg"></div>\t\t</div>\t</div>')[0];n.style.width=i,e.body.appendChild(n);var a=s(n).picker();e.pickers.push(a),n.addEventListener("change",function(e){var t=this.nextSibling;if(t&&t.picker){var i=(e.detail||{}).item||{};t.picker.setItems(i.children)}},!1)}},setData:function(e){e=e||[],this.pickers[0].setItems(e)},getSelectedItems:function(){var e=this,t=[];for(var i in e.pickers)if(e.pickers.hasOwnProperty(i)){var c=e.pickers[i];t.push(c.getSelectedItem()||{})}return t},show:function(e){var t=this;t.callback=e,t.mask.show(),i.body.classList.add(s.className("poppicker-active-for-page")),t.panel.classList.add(s.className("active")),t.__back=s.back,s.back=function(){t.hide()}},hide:function(){var e=this;e.disposed||(e.panel.classList.remove(s.className("active")),e.mask.close(),i.body.classList.remove(s.className("poppicker-active-for-page")),s.back=e.__back)},dispose:function(){var t=this;t.hide(),setTimeout(function(){for(var e in t.panel.parentNode.removeChild(t.panel),t)t[e]=null,delete t[e];t.disposed=!0},300)}})}(mui,document);